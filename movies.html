<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Name - FireVideo</title>

    <link rel="icon" type="image/x-icon" href="ICONS/firevideo.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script>
        window.addEventListener("load", getMovieData());
        async function getMovieData() {
            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });

            let id = params.id;

            if (id == null) {
                window.location.href = "/";
            } else {
                const api_url = "https://firevideo.vercel.app/DB/MOVIES.json";
                const response = await fetch(api_url);
                var data = await response.json();
                var foundMovie = false;
                data.every((item) => {
                    let movie = item;
                    // console.log(movie);
                    if (movie.id == id) {
                        foundMovie = true;
                        return false;
                    } else {
                        foundMovie = false;
                        return true;
                    }
                })
                if (foundMovie) {
                    alert("Found Movie");
                } else {
                    $("#main_container").load("404.html");
                }
            }
        }
    </script>
</head>

<body>

    <div id="main_container" class="container-fluid">
        <p id="mvi"></p>
    </div>

</body>

</html>