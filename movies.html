<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Name - FireVideo</title>

    <link rel="icon" type="image/x-icon" href="ICONS/firevideo.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script>
        window.addEventListener("load", getMovieData());
        async function getMovieData() {
            $("body").load("navbar.html");
            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });

            let id = params.id;

            if (id == null) {
                window.location.href = "/";
            } else {
                const api_url = "https://firevideo.vercel.app/DB/MOVIES.json";
                const response = await fetch(api_url);
                var data = await response.json();
                var foundMovie = false;
                data.every((item) => {
                    let movie = item;
                    // console.log(movie);
                    if (movie.id == id) {
                        foundMovie = true;
                        return false;
                    } else {
                        foundMovie = false;
                        return true;
                    }
                })
                if (foundMovie) {
                    $("#main_container").load("movie_details.html");
                } else {
                    $("#main_container").load("404.html");
                }
            }
        }
    </script>
</head>

<body data-bs-theme="dark">
    <nav class="navbar navbar-expand bg-dark" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="assets/images/logo.png" height="80px" alt="FireVideo" style="padding: 20px;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <div id="main_container" class="container-fluid">
        <p id="mvi"></p>
    </div>

</body>

</html>